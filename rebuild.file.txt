-- 1) Create ENUM type
CREATE TYPE account_type AS ENUM ('Admin', 'Employee', 'Client');

-- 2) Create classification table
CREATE TABLE IF NOT EXISTS classification (
  classification_id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  category VARCHAR(255) NOT NULL,
  info TEXT NOT NULL
);

-- 3) Create inventory table
CREATE TABLE IF NOT EXISTS inventory (
  inv_id SERIAL PRIMARY KEY,
  inv_make VARCHAR(255) NOT NULL,
  inv_model VARCHAR(255) NOT NULL,
  inv_year CHAR(4) NOT NULL,
  inv_description TEXT NOT NULL,
  inv_image VARCHAR(255) NOT NULL,
  inv_thumbnail VARCHAR(255) NOT NULL,
  inv_price NUMERIC(9,0) NOT NULL,
  inv_miles INTEGER NOT NULL,
  inv_color VARCHAR(255) NOT NULL,
  classification_id INT
);

-- 4) Add relationship
ALTER TABLE IF EXISTS inventory
ADD CONSTRAINT fk_classification FOREIGN KEY (classification_id)
REFERENCES classification (classification_id)
ON UPDATE CASCADE
ON DELETE NO ACTION;

-- 5) Create account table
CREATE TABLE IF NOT EXISTS public.account
(
    account_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    account_firstname character varying NOT NULL,
    account_lastname character varying NOT NULL,
    account_email character varying NOT NULL,
    account_password character varying NOT NULL,
    account_type account_type NOT NULL DEFAULT 'Client'::account_type,
    CONSTRAINT account_pkey PRIMARY KEY (account_id)
);
